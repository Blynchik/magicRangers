<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏—è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- –ú–µ–Ω—é -->
<div th:replace="~{fragment/user_menu_actions :: userActionsMenu(${authUser})}"></div>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">

            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <h1 class="text-center mb-4">üîç –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏—è</h1>

            <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <form action="/event" method="get" class="d-flex gap-2">
                        <input type="text" id="name" name="name" th:value="${param.name}"
                               class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è...">
                        <button type="submit" class="btn btn-primary">–ù–∞–π—Ç–∏</button>
                    </form>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
            <div th:if="${event != null}" class="card shadow-sm border-success mb-4">
                <div class="card-body">
                    <h4 class="text-success">‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞</h4>
                    <p><strong>–ù–∞–∑–≤–∞–Ω–∏–µ:</strong> <span th:text="${event.title}"></span></p>
                    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> <span th:text="${event.descr}"></span></p>
                </div>
            </div>

            <!-- –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ -->
            <div th:if="${param.name != null and event == null}" class="alert alert-danger">
                ‚ùå –°–æ–±—ã—Ç–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
            </div>

        </div>
    </div>
</div>

<!-- Toast —Å –æ—à–∏–±–∫–æ–π -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="errorToast" class="toast align-items-center text-white bg-danger border-0"
         role="alert" aria-live="assertive" aria-atomic="true"
         data-bs-delay="10000"
         th:if="${handledError}">
        <div class="d-flex">
            <div class="toast-body" th:text="${handledError}"></div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        const toastEl = document.getElementById('errorToast');
        if (toastEl) {
            const toast = new bootstrap.Toast(toastEl);
            toast.show();
        }
    });
</script>

</body>
</html>